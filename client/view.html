<html>

<head>
    <script src="node_modules/infusion/dist/infusion-all.js"></script>
    <script src="js/availableTexts.js"></script>
    <script src="js/markupAppendingComponent.js"></script>
    <script src="js/erasureMaker.js"></script>
    <script src="js/getParameterByName.js"></script>

    <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro|Source+Sans+Pro" rel="stylesheet">
    <link rel="stylesheet" href="node_modules/infusion/src/framework/core/css/fluid.css">
    <link rel="stylesheet" href="css/erasureMaker.css" />

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@waharnum">
    <meta name="twitter:title" content="ErasureMaker - make erasure poems online from public domain texts">
    <meta name="twitter:image" content="http://erasure.alanharnum.ca/img/twitter_card_large.png">
    <meta name="twitter:image:alt" content="erasure poem: 'the world due to defects has a method of virtue'">

    <meta property="og:url"                content="http://erasure.alanharnum.ca" />
    <meta property="og:type"               content="website" />
    <meta property="og:title"              content="ErasureMaker" />
    <meta property="og:description"        content="Make erasure poems online from public domain texts" />
    <meta property="og:image"              content="http://erasure.alanharnum.ca/img/twitter_card_large.png" />

    <title>ErasureMaker</title>
</head>

<body>
    <div class="erasureMaker-pageContainer erasureMaker-viewPage">
      <div class="erasureMaker-pageTitle-container">
        <div class="erasureMaker-pageTitle-innerContainer">
            <h1 class="erasureMaker-pageTitle"><a href="/"><span class="erasureMaker-pageTitle-erasure">Erasure</span>Maker</a></h1>
        </div>
      </div>
      <div class="erasureMaker-menuContainer">
        <div class="erasureMaker-menuItem">
            <a href="view.html?erasureId=RAND" class="currentPage">View Random</a>
        </div>
        <div class="erasureMaker-menuItem">
            <a href="edit.html">Create New</a>
        </div>
        <div class="erasureMaker-menuItem">
            <a href="erasure-index.html">Index</a>
        </div>
      </div>
        <div class="erasureMaker-contentContainer">
            <div class="ahc-erasureMaker ah-erasureMaker"></div>
        </div>

    </div>

    <script>
        var erasureId = ca.alanharnum.erasureMaker.getParameterByName("erasureId");

        $(document).ready(function () {
            var erasureView = ca.alanharnum.erasureMakerView(".ahc-erasureMaker", {
                listeners: {
                    "onCreate.changeErasure": {
                        this: "{that}.applier",
                        method: "change",
                        args: ["displayedErasure", erasureId]
                    }
                },
                components: {
                    erasureControls: {
                        options: {
                            listeners: {
                                "onCreate.changeToBlackoutStyle": {
                                    funcName: "ca.alanharnum.erasureMakerView.changeToRemovedStyle",
                                    args: ["{that}", "{erasureMakerView}"]
                                },
                            }
                        }
                    },
                    erasureText: {
                        options: {
                            strings: {
                                markup:
                                `
                                <div class="erasureTitleContainer"><h2 class="erasureTitle">Title</h2></div>
                                <div class="erasureText eraseStyle-removed"></div>
                                <p class="source"></p>
                                `
                            }
                        }
                    }
                }
            });

            ca.alanharnum.erasureMakerView.changeToRemovedStyle = function (erasureControls, erasureView) {
                erasureControls.locate("erase-style-selector").val("removed");
                erasureControls.locate("erase-style-selector").change();
                erasureView.applier.change("eraseStyle", "removed");
            };
        });
    </script>

    <footer class="erasureMaker-footerContainer">

            <div class="erasureMaker-footerContainer-inner">

                    All content on this site is licensed under a <a href="https://creativecommons.org/publicdomain/zero/1.0/legalcode">CC0 license</a>; all erasures are anonymously contributed.

            </div>

    </footer>

</body>

</html>
