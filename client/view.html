<html>

<head>
    <script src="node_modules/infusion/dist/infusion-all.js"></script>
    <script src="js/availableTexts.js"></script>
    <script src="js/markupAppendingComponent.js"></script>
    <script src="js/erasureMaker.js"></script>
    <script src="js/getParameterByName.js"></script>

    <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro|Source+Sans+Pro" rel="stylesheet">
    <link rel="stylesheet" href="node_modules/infusion/src/framework/core/css/fluid.css">
    <link rel="stylesheet" href="css/erasureMaker.css" />
    <title>ErasureMaker</title>
</head>

<body>
    <div class="erasureMaker-pageContainer erasureMaker-viewPage">
      <div class="erasureMaker-pageTitle-container">
        <div class="erasureMaker-pageTitle-innerContainer">
            <h1 class="erasureMaker-pageTitle"><a href="/"><span class="erasureMaker-pageTitle-erasure">Erasure</span>Maker</a></h1>
        </div>
      </div>
      <div class="erasureMaker-menuContainer">
        <div class="erasureMaker-menuItem">
            <a href="view.html?erasureId=RAND" class="currentPage">View Random</a>
        </div>
        <div class="erasureMaker-menuItem">
            <a href="edit.html">Create New</a>
        </div>
        <div class="erasureMaker-menuItem">
            <a href="erasure-index.html">Index</a>
        </div>
      </div>
        <div class="erasureMaker-contentContainer">
            <div class="ahc-erasureMaker ah-erasureMaker"></div>
        </div>

    </div>

    <script>
        var erasureId = ca.alanharnum.erasureMaker.getParameterByName("erasureId");

        $(document).ready(function () {
            var erasureView = ca.alanharnum.erasureMakerView(".ahc-erasureMaker", {
                listeners: {
                    "onCreate.changeErasure": {
                        this: "{that}.applier",
                        method: "change",
                        args: ["displayedErasure", erasureId]
                    }
                },
                components: {
                    erasureControls: {
                        options: {
                            listeners: {
                                "onCreate.changeToBlackoutStyle": {
                                    funcName: "ca.alanharnum.erasureMakerView.changeToBlackoutStyle",
                                    args: ["{that}", "{erasureMakerView}"]
                                },
                            }
                        }
                    },
                    erasureText: {
                        options: {
                            strings: {
                                markup:
                                `
                                <div class="erasureTitleContainer"><h2 class="erasureTitle">Title</h2></div>
                                <p class="text eraseStyle-blacked-out"></p>
                                <p class="source"></p>
                                `
                            }
                        }
                    }
                }
            });

            ca.alanharnum.erasureMakerView.changeToBlackoutStyle = function (erasureControls, erasureView) {
                erasureControls.locate("erase-style-selector").val("blacked-out");
                erasureControls.locate("erase-style-selector").change();
                erasureView.applier.change("eraseStyle", "blacked-out");
            };
        });
    </script>

    <footer>
        <div class="erasureMaker-footerContainer">
            <div class="erasureMaker-footerContainer-inner">
            All content on this site is licensed under a <a href="https://creativecommons.org/publicdomain/zero/1.0/legalcode">CC0 license</a>; all erasures are anonymously contributed.
            </div>
        </div>
    </footer>

</body>

</html>
